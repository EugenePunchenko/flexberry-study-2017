/*flexberryautogenerated="false"*/
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

using ICSSoft.STORMNET.Business;
using ICSSoft.STORMNET.Business.LINQProvider;

using System.Linq;
using System.Collections.Generic;

namespace IIS.Агрегатор_контактов
{
    public partial class SQLrequests : System.Web.UI.Page
    {
        /*
        1)  Declare @n as int = 1
	        SELECT Top(@n) User_id1, COUNT(User_id1) From dbo.contact  GROUP BY User_id1 

        2)  SELECT TOP 1  surname, COUNT(surname) count  From dbo.profile GROUP BY surname Order By count DESC

        3)  Select  dbo.userBase.id, dbo.profile.name, DATEPART(YEAR, birthday) as userbirthday, gender, network.name, Count(*) as profile_count  FROM dbo.userBase 
	        INNER JOIN dbo.profile
            ON dbo.userBase.id=dbo.profile.User_id	
	        INNER JOIN dbo.network
            ON dbo.profile.network_idnetwork=dbo.network.id
	        group by dbo.userBase.id, dbo.profile.name, DATEPART(YEAR, birthday), gender, network.name
	        ORDER BY profile_count DESC, network.name, userbirthday

        4)  Declare 
		        @contact_count real,
		        @user_count real
	        SELECT @contact_count=Count(user_ID1) From dbo.contact
	        SELECT @user_count=Count(id) From dbo.userBase
	        PRINT @contact_count/@user_count

        5)	Declare 
		        @percon_count INT
	        SELECT  @percon_count = COUNT(gender) From dbo.profile
	        SELECT  COUNT(gender)*100/@percon_count From dbo.profile  Where gender='m' GROUP BY gender	
	        SELECT  COUNT(gender)*100/@percon_count From dbo.profile  Where gender='f' GROUP BY gender
	    */
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            int n = Convert.ToInt32(TextBox1.Text);
            var ds = (SQLDataService)DataServiceProvider.DataService; // Cервис данных.
            List<Contact> contact = ds.Query<Contact>(Contact.Views.ContactE).ToList<Contact>(); // Получение объекта.
        }

        protected void TextBox1_TextChanged(object sender, EventArgs e)
        {

        }
    }
}
